#:kivy 2.3.0

<FUNStart>:
    class_selection: class_spinner.text
    registrationtime_selection: registrationtime_spinner.text
    heatlength_selection: heatlength_spinner.text
    warmup_selection: warmup_spinner.text
    shortest_laptime_selection: shortest_laptime_spinner.text
    auto_start_after_warmup: auto_start_checkbox.active

    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10

        Label:
            text: "RACE SETUP:"
            size_hint: (1, 0.1)
            halign: 'left'
            valign: 'top'
            text_size: self.size
            color: 1, 1, 1, 1 # White text color
            font_size: '24sp'

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            size_hint: (1, 0.2)

            BoxLayout:
                orientation: 'vertical'
                spacing: 5
                size_hint: (1, 1)

                Label:
                    text: "Class:"
                    size_hint: (1, 0.4)
                    halign: 'center'
                    valign: 'bottom'
                    text_size: self.size

                Spinner:
                    id: class_spinner
                    text: "2WD"  # Default value
                    values: root.classes
                    size_hint: (1, 0.6)
                    on_text: root.on_class_selection(self, self.text) 

            BoxLayout:
                orientation: 'vertical'
                spacing: 5
                size_hint: (1, 1)

                Label:
                    text: "Registrationtime:"
                    size_hint: (1, 0.4)
                    halign: 'center'
                    valign: 'bottom'
                    text_size: self.size

                Spinner:
                    id: registrationtime_spinner
                    text: "1 min"  # Default value
                    values: ["1 min", "2 min", "3 min", "4 min"]
                    size_hint: (1, 0.6)

            BoxLayout:
                orientation: 'vertical'
                spacing: 5
                size_hint: (1, 1)

                Label:
                    text: "Heatlength:"
                    size_hint: (1, 0.4)
                    halign: 'center'
                    valign: 'bottom'
                    text_size: self.size

                Spinner:
                    id: heatlength_spinner
                    text: "5 min"  # Default value
                    values: ["5 min", "10 min", "15 min", "20 min"]
                    size_hint: (1, 0.6)

            BoxLayout:
                orientation: 'vertical'
                spacing: 5
                size_hint: (1, 1)

                Label:
                    text: "Warmup:"
                    size_hint: (1, 0.4)
                    halign: 'center'
                    valign: 'bottom'
                    text_size: self.size

                Spinner:
                    id: warmup_spinner
                    text: "1 min"  # Default value
                    values: ["1 min", "2 min", "3 min", "4 min"]
                    size_hint: (1, 0.6)

            BoxLayout:
                orientation: 'vertical'
                spacing: 5
                size_hint: (1, 1)

                Label:
                    text: "Shortest Laptime:"
                    size_hint: (1, 0.4)
                    halign: 'center'
                    valign: 'bottom'
                    text_size: self.size

                Spinner:
                    id: shortest_laptime_spinner
                    text: "5 sec"  # Default value
                    values: ["5 sec", "10 sec", "15 sec", "20 sec"] 
                    size_hint: (1, 0.6)

        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, 0.2)

            CheckBox:
                id: auto_start_checkbox
                size_hint: (0.1, 0.1)
                active: root.auto_start_after_warmup  # Bind to the property

            Label:
                text: "Automatically start after warmup?"
                size_hint: (0.9, 0.2)
                halign: 'left'
                valign: 'middle'
                text_size: self.size

        Widget:
            size_hint_y: None
            height: '200dp'

        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, 0.2)

            Button:
                text: 'Back'
                size_hint: None, None
                size: '100dp', '50dp'
                background_color: 0.8, 0.1, 0.1, 1
                color: 1, 1, 1, 1
                pos_hint: {'x': 0}
                on_press: root.go_to_index()

            Widget:
                size_hint_x: None
                width: self.parent.width - 220

            Button:
                text: 'Next'
                size_hint: None, None
                size: '100dp', '50dp'
                background_color: 0.1, 0.8, 0.1, 1
                color: 1, 1, 1, 1
                pos_hint: {'right': 1}
                on_press: root.go_to_funregister()
